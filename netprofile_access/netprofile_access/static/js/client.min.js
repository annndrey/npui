var RecaptchaOptions={tabindex:9,theme:"white"};$(function(){var e=new RegExp("^(.*(?:\\?|&))__locale=([a-zA-Z0-9_.-]+)(.*)$"),a=$("meta[name=csrf-token]").attr("content"),t=$("#fileupload");$.ajaxSetup({headers:{"X-CSRFToken":a}}),$("input,select,textarea").not("[type=submit],#__locale").jqBootstrapValidation({preventSubmit:!0}),$(".chosen-select").chosen(),$(".no-js").removeClass("no-js"),$(".hide-no-js").removeClass("hide-no-js"),$("#__locale").change(function(){var a,t=$(this).val(),n=window.location.search;return $("#user").val()?!1:(n?(a=e.exec(n))?window.location.search=a[1]+"__locale="+t+a[3]:window.location.search+="&__locale="+t:window.location.search="?__locale="+t,!1)}),t.length&&(t.fileupload({url:"/upload",dataType:"json",filesContainer:$("tbody.files"),uploadTemplateId:null,downloadTemplateId:null,uploadTemplate:function(e){var a=$();return $.each(e.files,function(t,n){var l,s;l=$('<tr class="template-upload fade"/>').append($("<td/>").append([$('<p class="name"/>').text(n.name),$('<strong class="error text-danger"/>')])).append($("<td/>").append([$('<p class="size"/>').text("Processing..."),$('<div class="progress progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"/>').append($('<div class="progress-bar progress-bar-success" style="width:0%;"/>'))])),s=$("<td/>"),t||e.options.autoUpload||s.append([$('<button class="btn btn-primary start" disabled="disabled"/>').text(" Start").prepend($('<span class="glyphicon glyphicon-upload"/>')),"&nbsp;"]),t||s.append($('<button class="btn btn-warning cancel"/>').text(" Cancel").prepend($('<span class="glyphicon glyphicon-ban-circle"/>'))),l.append(s),a=a.add(l)}),a},downloadTemplate:function(e){var a=$();return $.each(e.files,function(t,n){var l,s,p,o;l=$('<tr class="template-download fade"/>'),p=$('<p class="name"/>'),n.url?(p.append(o=$("<a/>").text(n.name).attr({href:n.url,title:n.name,download:n.name})),n.thumbnailUrl&&o.attr("data-gallery","data-gallery")):p.append($("<span/>").text(n.name)),s=$("<td/>").append(p),n.error&&s.append($("<div/>").text(n.error).prepend($('<span class="label label-danger"/>').text("Error"))),l.append(s),l.append($("<td/>").append($('<span class="size"/>').text(e.formatFileSize(n.size)))),s=$("<td/>"),n.deleteUrl?(s.append(p=$('<button class="btn btn-danger delete"/>').attr({"data-type":n.deleteType,"data-url":n.deleteUrl}).text(" Delete").prepend($('<span class="glyphicon glyphicon-trash"/>'))),n.deleteWithCredentials&&p.attr("data-xhr-fields",'{"withCredentials":true}'),s.append($('<input type="checkbox" name="delete" value="1" class="toggle pull-right"/>'))):s.append($('<button class="btn btn-warning cancel"/>').text(" Cancel").prepend($('<span class="glyphicon glyphicon-ban-circle"/>'))),l.append(s),a=a.add(l)}),a}}).addClass("fileupload-processing"),$.ajax({url:t.fileupload("option","url"),method:"GET",data:t.serialize(),dataType:"json",context:t[0]}).always(function(){$(this).removeClass("fileupload-processing")}).done(function(e){$(this).fileupload("option","done").call(this,$.Event("done"),{result:e})}))});