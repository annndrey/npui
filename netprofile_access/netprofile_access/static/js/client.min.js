var RecaptchaOptions={tabindex:9,theme:"white"},_trans={},_=function(e){return e in _trans?_trans[e]:e};$(function(){var e=new RegExp("^(.*(?:\\?|&))__locale=([a-zA-Z0-9_.-]+)(.*)$"),a=$("meta[name=csrf-token]").attr("content"),t=$("meta[name=js-translations]").attr("content"),n=$("#fileupload"),l=function(e){var a,t,n=$(this);a=n.data("dp-start"),t=n.data("dp-end"),a?$("#"+a).data("DateTimePicker").setEndDate(e.date):t&&$("#"+t).data("DateTimePicker").setStartDate(e.date)};$.ajaxSetup({headers:{"X-CSRFToken":a}}),t&&(_trans=$.parseJSON(t)),$("input,select,textarea").not("[type=submit],#__locale").jqBootstrapValidation({preventSubmit:!0}),$(".chosen-select").chosen({search_contains:!0}),$(".dt-picker").datetimepicker().on("change.dp",l),$(".no-js").removeClass("no-js"),$(".hide-no-js").removeClass("hide-no-js"),$("#__locale").change(function(){var a,t=$(this).val(),n=window.location.search;return $("#user").val()?!1:(n?(a=e.exec(n))?window.location.search=a[1]+"__locale="+t+a[3]:window.location.search+="&__locale="+t:window.location.search="?__locale="+t,!1)}),n.length&&(n.fileupload({url:"/upload",dataType:"json",filesContainer:$("tbody.files"),uploadTemplateId:null,downloadTemplateId:null,uploadTemplate:function(e){var a=$();return $.each(e.files,function(t,n){var l,s;l=$('<tr class="template-upload fade"/>').append($("<td/>").append([$('<p class="name"/>').text(n.name),$('<strong class="error text-danger"/>')])).append($("<td/>").append([$('<p class="size"/>').text(_("Processingâ€¦")),$('<div class="progress progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"/>').append($('<div class="progress-bar progress-bar-success" style="width:0%;"/>'))])),s=$("<td/>"),t||e.options.autoUpload||s.append([$('<button class="btn btn-primary start" disabled="disabled"/>').text(" "+_("Begin")).prepend($('<span class="glyphicon glyphicon-upload"/>')),"&nbsp;"]),t||s.append($('<button class="btn btn-warning cancel"/>').text(" "+_("Cancel")).prepend($('<span class="glyphicon glyphicon-ban-circle"/>'))),l.append(s),a=a.add(l)}),a},downloadTemplate:function(e){var a=$();return $.each(e.files,function(t,n){var l,s,r,p;l=$('<tr class="template-download fade"/>'),r=$('<p class="name"/>'),n.url?(r.append(p=$("<a/>").text(n.name).attr({href:n.url,title:n.name,download:n.name})),n.thumbnailUrl&&p.attr("data-gallery","data-gallery")):r.append($("<span/>").text(n.name)),s=$("<td/>").append(r),n.error&&s.append($("<div/>").text(n.error).prepend($('<span class="label label-danger"/>').text(_("Error")))),l.append(s),l.append($("<td/>").append($('<span class="size"/>').text(e.formatFileSize(n.size)))),s=$("<td/>"),n.deleteUrl?(s.append(r=$('<button class="btn btn-danger delete"/>').attr({"data-type":n.deleteType,"data-url":n.deleteUrl}).text(" "+_("Delete")).prepend($('<span class="glyphicon glyphicon-trash"/>'))),n.deleteWithCredentials&&r.attr("data-xhr-fields",'{"withCredentials":true}'),s.append($('<input type="checkbox" name="delete" value="1" class="toggle pull-right"/>'))):s.append($('<button class="btn btn-warning cancel"/>').text(" "+_("Cancel")).prepend($('<span class="glyphicon glyphicon-ban-circle"/>'))),l.append(s),a=a.add(l)}),a}}).addClass("fileupload-processing"),$.ajax({url:n.fileupload("option","url"),method:"GET",data:n.serialize(),dataType:"json",context:n[0]}).always(function(){$(this).removeClass("fileupload-processing")}).done(function(e){$(this).fileupload("option","done").call(this,$.Event("done"),{result:e})}))});